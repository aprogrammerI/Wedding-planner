<!--&lt;!&ndash;&lt;!&ndash; Header Controls &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;<div class="d-flex justify-content-end gap-2 mb-3">&ndash;&gt;-->
<!--&lt;!&ndash;  <button class="btn btn-primary" (click)="sortByPriority()">Sort By Priority</button>&ndash;&gt;-->
<!--&lt;!&ndash;  <button class="btn btn-outline-secondary" *ngIf="isSortedByPriority" (click)="resetSort()">Reset Sort</button>&ndash;&gt;-->
<!--&lt;!&ndash;  <button class="btn btn-primary" (click)="toggleAddForm()">&ndash;&gt;-->
<!--&lt;!&ndash;    {{ showAddForm ? 'Close' : 'Add Task' }}&ndash;&gt;-->
<!--&lt;!&ndash;  </button>&ndash;&gt;-->
<!--&lt;!&ndash;</div>&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash; Task Filters &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;<div class="task-filters mb-3" *ngIf="!isSortedByPriority && !showFilteredTasks">&ndash;&gt;-->
<!--&lt;!&ndash;  <div class="row g-2 align-items-center">&ndash;&gt;-->
<!--&lt;!&ndash;    <div class="col-md-3">&ndash;&gt;-->
<!--&lt;!&ndash;      <label class="form-label">Filter by assigned person:</label>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->
<!--&lt;!&ndash;    <div class="col-md-4">&ndash;&gt;-->
<!--&lt;!&ndash;      <select class="form-select" (change)="filterByAssignee($any($event.target).value)">&ndash;&gt;-->
<!--&lt;!&ndash;        <option value="">All tasks</option>&ndash;&gt;-->
<!--&lt;!&ndash;        <option *ngFor="let user of availableUsers" [value]="user">{{ user }}</option>&ndash;&gt;-->
<!--&lt;!&ndash;      </select>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->
<!--&lt;!&ndash;</div>&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash; Add Task Form &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;<div *ngIf="showAddForm" class="mb-3 row g-2 align-items-end">&ndash;&gt;-->
<!--&lt;!&ndash;  <div class="col-md-4">&ndash;&gt;-->
<!--&lt;!&ndash;    <label class="form-label">Title</label>&ndash;&gt;-->
<!--&lt;!&ndash;    <input [(ngModel)]="newTitle" class="form-control" placeholder="Task title" />&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->
<!--&lt;!&ndash;  <div class="col-md-2">&ndash;&gt;-->
<!--&lt;!&ndash;    <label class="form-label">Due date</label>&ndash;&gt;-->
<!--&lt;!&ndash;    <input type="date" [(ngModel)]="newDueDate" (change)="onDueDateChange()" class="form-control" />&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->

<!--&lt;!&ndash;  <div class="col-md-4">&ndash;&gt;-->
<!--&lt;!&ndash;    <div class="form-check">&ndash;&gt;-->
<!--&lt;!&ndash;      <input class="form-check-input" type="checkbox"&ndash;&gt;-->
<!--&lt;!&ndash;             [(ngModel)]="newReminderEnabled"&ndash;&gt;-->
<!--&lt;!&ndash;             [disabled]="!newDueDate"&ndash;&gt;-->
<!--&lt;!&ndash;             id="reminderCheck">&ndash;&gt;-->
<!--&lt;!&ndash;      <label class="form-check-label" for="reminderCheck">&ndash;&gt;-->
<!--&lt;!&ndash;        Enable reminder&ndash;&gt;-->
<!--&lt;!&ndash;      </label>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->
<!--&lt;!&ndash;  <div class="col-md-2">&ndash;&gt;-->
<!--&lt;!&ndash;    <label class="form-label">Priority</label>&ndash;&gt;-->
<!--&lt;!&ndash;    <select [(ngModel)]="newPriority" class="form-select">&ndash;&gt;-->
<!--&lt;!&ndash;      <option value="low">Low</option>&ndash;&gt;-->
<!--&lt;!&ndash;      <option value="medium">Medium</option>&ndash;&gt;-->
<!--&lt;!&ndash;      <option value="high">High</option>&ndash;&gt;-->
<!--&lt;!&ndash;    </select>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->
<!--&lt;!&ndash;  <div class="col-md-2">&ndash;&gt;-->
<!--&lt;!&ndash;    <label class="form-label">Assign to</label>&ndash;&gt;-->
<!--&lt;!&ndash;    <select [(ngModel)]="newAssignedTo" class="form-select">&ndash;&gt;-->
<!--&lt;!&ndash;      <option value="">Select person</option>&ndash;&gt;-->
<!--&lt;!&ndash;      <option *ngFor="let user of availableUsers" [value]="user">{{ user }}</option>&ndash;&gt;-->
<!--&lt;!&ndash;    </select>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->
<!--&lt;!&ndash;  <div class="col-md-2 d-flex gap-2">&ndash;&gt;-->
<!--&lt;!&ndash;    <button (click)="add()" class="btn btn-primary w-100">Add</button>&ndash;&gt;-->
<!--&lt;!&ndash;    <button (click)="cancelAdd()" class="btn btn-outline-secondary w-100">Cancel</button>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->
<!--&lt;!&ndash;  <div class="col-12">&ndash;&gt;-->
<!--&lt;!&ndash;    <label class="form-label">Description</label>&ndash;&gt;-->
<!--&lt;!&ndash;    <textarea [(ngModel)]="newDescription" class="form-control" rows="2" placeholder="Optional description"></textarea>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;  <div class="col-md-4">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    <div class="form-check">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;&lt;!&ndash;      <input class="form-check-input" type="checkbox" [(ngModel)]="newReminderEnabled" (change)="onReminderEnabledChange()" id="reminderCheck">&ndash;&gt;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      <input class="form-check-input"&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;             type="checkbox"&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;             [(ngModel)]="editDraft.reminderEnabled"&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;             [disabled]="!editDraft.dueDate"&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;             [id]="'editReminderCheck' + task.id">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      <label class="form-check-label" for="reminderCheck">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        Enable reminder&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      </label>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    </div>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;  </div>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;&lt;!&ndash;  <div class="col-md-4" *ngIf="newReminderEnabled">&ndash;&gt;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;&lt;!&ndash;    <label class="form-label">Reminder date</label>&ndash;&gt;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;&lt;!&ndash;    <input type="date" [(ngModel)]="newReminderDate" class="form-control" />&ndash;&gt;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;&lt;!&ndash;    <small class="text-muted">Defaults to due date if not set</small>&ndash;&gt;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;&lt;!&ndash;  </div>&ndash;&gt;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;</div>&ndash;&gt;&ndash;&gt;-->


<!--&lt;!&ndash;  <div class="col-md-4">&ndash;&gt;-->
<!--&lt;!&ndash;    <div class="form-check">&ndash;&gt;-->
<!--&lt;!&ndash;      <input class="form-check-input"&ndash;&gt;-->
<!--&lt;!&ndash;             type="checkbox"&ndash;&gt;-->
<!--&lt;!&ndash;             [(ngModel)]="editDraft.reminderEnabled"&ndash;&gt;-->
<!--&lt;!&ndash;             [disabled]="!editDraft.dueDate"&ndash;&gt;-->
<!--&lt;!&ndash;             [id]="'editReminderCheck' + task.id">&ndash;&gt;-->
<!--&lt;!&ndash;      <label class="form-check-label" [for]="'editReminderCheck' + task.id">&ndash;&gt;-->
<!--&lt;!&ndash;        Enable reminder&ndash;&gt;-->
<!--&lt;!&ndash;      </label>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->

<!--&lt;!&ndash;  <div class="col-md-4">&ndash;&gt;-->
<!--&lt;!&ndash;    <label class="form-label form-label-sm">Due date</label>&ndash;&gt;-->
<!--&lt;!&ndash;    <input type="date"&ndash;&gt;-->
<!--&lt;!&ndash;           [(ngModel)]="editDraft.dueDate"&ndash;&gt;-->
<!--&lt;!&ndash;           class="form-control form-control-sm"&ndash;&gt;-->
<!--&lt;!&ndash;           placeholder="Due date" />&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash; Reusable Task Template &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;<ng-template #taskTemplate let-task>&ndash;&gt;-->
<!--&lt;!&ndash;  <li class="list-group-item" [class.expanded]="expandedTaskId === task.id">&ndash;&gt;-->
<!--&lt;!&ndash;    <div class="d-flex justify-content-between align-items-start gap-3" (click)="toggleExpandTask(task)" style="cursor:pointer;">&ndash;&gt;-->
<!--&lt;!&ndash;      <div class="form-check mt-1" (click)="$event.stopPropagation()">&ndash;&gt;-->
<!--&lt;!&ndash;        <input class="form-check-input"&ndash;&gt;-->
<!--&lt;!&ndash;               type="checkbox"&ndash;&gt;-->
<!--&lt;!&ndash;               [checked]="task.done"&ndash;&gt;-->
<!--&lt;!&ndash;               (change)="onDoneChange(task, $any($event.target).checked)" />&ndash;&gt;-->
<!--&lt;!&ndash;      </div>&ndash;&gt;-->
<!--&lt;!&ndash;      <div class="flex-grow-1">&ndash;&gt;-->
<!--&lt;!&ndash;        <div *ngIf="editingTaskId !== task.id; else editForm">&ndash;&gt;-->
<!--&lt;!&ndash;          <div class="d-flex align-items-center">&ndash;&gt;-->
<!--&lt;!&ndash;            <div class="flex-grow-1">&ndash;&gt;-->
<!--&lt;!&ndash;              <span class="fw-semibold" [class.text-decoration-line-through]="task.done">&ndash;&gt;-->
<!--&lt;!&ndash;                {{ task.title }}&ndash;&gt;-->
<!--&lt;!&ndash;              </span>&ndash;&gt;-->
<!--&lt;!&ndash;              <span class="badge ms-2" [ngClass]="{&ndash;&gt;-->
<!--&lt;!&ndash;                'priority-low': task.priority==='low',&ndash;&gt;-->
<!--&lt;!&ndash;                'priority-medium': task.priority==='medium',&ndash;&gt;-->
<!--&lt;!&ndash;                'priority-high': task.priority==='high'&ndash;&gt;-->
<!--&lt;!&ndash;              }">{{ task.priority || 'medium' }}</span>&ndash;&gt;-->
<!--&lt;!&ndash;              <span *ngIf="getSubtaskCount(task) > 0" class="ms-2 text-muted small">({{ getCompletedSubtaskCount(task) }}/{{ getSubtaskCount(task) }})</span>&ndash;&gt;-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->
<!--&lt;!&ndash;          </div>&ndash;&gt;-->
<!--&lt;!&ndash;          <div class="text-muted small" *ngIf="task.description">{{ task.description }}</div>&ndash;&gt;-->
<!--&lt;!&ndash;          <div class="text-muted small" *ngIf="task.assignedTo">&ndash;&gt;-->
<!--&lt;!&ndash;            <i class="fas fa-user me-1"></i>Assigned to: {{ task.assignedTo }}&ndash;&gt;-->
<!--&lt;!&ndash;          </div>&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          <div class="text-muted small" *ngIf="task.reminderEnabled && task.reminderDate">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          <div class="text-muted small" *ngIf="task.dueDate || task.reminderDate">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;            <i class="fas fa-bell me-1" [ngClass]="{&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;              'text-warning': isReminderDueSoon(task),&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;              'text-danger': isReminderOverdue(task)&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;            }"></i>{{ getReminderStatus(task) }}&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          </div>&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;          <div class="text-muted small" *ngIf="task.dueDate || task.reminderDate">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;            <i class="fas fa-bell me-1" [ngClass]="{&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    'text-warning': isReminderDueSoon(task),&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    'text-danger': isReminderOverdue(task)&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;  }"></i>{{ getReminderStatus(task) }}&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          </div>&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;          <div class="text-muted small" *ngIf="task.dueDate || task.reminderDate">&ndash;&gt;-->
<!--&lt;!&ndash;            <i class="fas fa-bell me-1" [ngClass]="{&ndash;&gt;-->
<!--&lt;!&ndash;    'text-warning': isReminderDueSoon(task),&ndash;&gt;-->
<!--&lt;!&ndash;    'text-danger': isReminderOverdue(task)&ndash;&gt;-->
<!--&lt;!&ndash;  }"></i>{{ getReminderStatus(task) }}&ndash;&gt;-->
<!--&lt;!&ndash;          </div>&ndash;&gt;-->

<!--&lt;!&ndash;          <div class="text-muted small" *ngIf="task.vendorId">&ndash;&gt;-->
<!--&lt;!&ndash;            <i class="fas fa-briefcase me-1"></i>&ndash;&gt;-->
<!--&lt;!&ndash;            Vendor: {{ getVendorById(task.vendorId)?.name }} <span class="text-muted">({{ getVendorById(task.vendorId)?.category }})</span>&ndash;&gt;-->
<!--&lt;!&ndash;          </div>&ndash;&gt;-->
<!--&lt;!&ndash;        </div>&ndash;&gt;-->
<!--&lt;!&ndash;        <ng-template #editForm>&ndash;&gt;-->
<!--&lt;!&ndash;          <div class="row g-2">&ndash;&gt;-->
<!--&lt;!&ndash;            <div class="col-md-5">&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;            <div class="col-md-4">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;              <input [(ngModel)]="editDraft.title"&ndash;&gt;-->
<!--&lt;!&ndash;                     class="form-control form-control-sm"&ndash;&gt;-->
<!--&lt;!&ndash;                     placeholder="Title" />&ndash;&gt;-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->
<!--&lt;!&ndash;            <div class="col-md-2">&ndash;&gt;-->
<!--&lt;!&ndash;              <select [(ngModel)]="editDraft.priority" class="form-select form-select-sm">&ndash;&gt;-->
<!--&lt;!&ndash;                <option value="low">Low</option>&ndash;&gt;-->
<!--&lt;!&ndash;                <option value="medium">Medium</option>&ndash;&gt;-->
<!--&lt;!&ndash;                <option value="high">High</option>&ndash;&gt;-->
<!--&lt;!&ndash;              </select>&ndash;&gt;-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->
<!--&lt;!&ndash;            <div class="col-md-3">&ndash;&gt;-->
<!--&lt;!&ndash;              <select [(ngModel)]="editDraft.assignedTo" class="form-select form-select-sm">&ndash;&gt;-->
<!--&lt;!&ndash;                <option value="">Select person</option>&ndash;&gt;-->
<!--&lt;!&ndash;                <option *ngFor="let user of availableUsers" [value]="user">{{ user }}</option>&ndash;&gt;-->
<!--&lt;!&ndash;              </select>&ndash;&gt;-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->
<!--&lt;!&ndash;            <div class="col-md-2 d-flex gap-2">&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;            <div class="col-md-3 d-flex gap-2">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;              <button (click)="saveEdit()" class="btn btn-sm btn-primary">Save</button>&ndash;&gt;-->
<!--&lt;!&ndash;              <button (click)="cancelEdit()" class="btn btn-sm btn-outline-secondary">Cancel</button>&ndash;&gt;-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->
<!--&lt;!&ndash;            <div class="col-12">&ndash;&gt;-->
<!--&lt;!&ndash;              <textarea [(ngModel)]="editDraft.description"&ndash;&gt;-->
<!--&lt;!&ndash;                        class="form-control form-control-sm"&ndash;&gt;-->
<!--&lt;!&ndash;                        rows="2"&ndash;&gt;-->
<!--&lt;!&ndash;                        placeholder="Description"></textarea>&ndash;&gt;-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->
<!--&lt;!&ndash;            <div class="col-md-4">&ndash;&gt;-->
<!--&lt;!&ndash;              <div class="form-check">&ndash;&gt;-->
<!--&lt;!&ndash;                <input class="form-check-input"&ndash;&gt;-->
<!--&lt;!&ndash;                       type="checkbox"&ndash;&gt;-->
<!--&lt;!&ndash;                       [(ngModel)]="editDraft.reminderEnabled"&ndash;&gt;-->
<!--&lt;!&ndash;                       [id]="'editReminderCheck' + task.id">&ndash;&gt;-->
<!--&lt;!&ndash;                <label class="form-check-label" [for]="'editReminderCheck' + task.id">&ndash;&gt;-->
<!--&lt;!&ndash;                  Enable reminder&ndash;&gt;-->
<!--&lt;!&ndash;                </label>&ndash;&gt;-->
<!--&lt;!&ndash;              </div>&ndash;&gt;-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;            <div class="col-md-4" *ngIf="editDraft.reminderEnabled">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;              <label class="form-label form-label-sm">Due/Reminder Date</label>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;              <input type="date"&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                     [(ngModel)]="editDraft.reminderDate"&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                     class="form-control form-control-sm"&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                     placeholder="Due/Reminder date" />&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;            </div>&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;            <div class="col-md-4" *ngIf="editDraft.reminderEnabled">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;              <label class="form-label form-label-sm">Due date</label>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;              <input type="date"&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                     [(ngModel)]="editDraft.dueDate"&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                     class="form-control form-control-sm"&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                     placeholder="Due date" />&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;            </div>&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;            <div class="col-md-4">&ndash;&gt;-->
<!--&lt;!&ndash;              <label class="form-label form-label-sm">Due date</label>&ndash;&gt;-->
<!--&lt;!&ndash;              <input type="date"&ndash;&gt;-->
<!--&lt;!&ndash;                     [(ngModel)]="editDraft.dueDate"&ndash;&gt;-->
<!--&lt;!&ndash;                     class="form-control form-control-sm"&ndash;&gt;-->
<!--&lt;!&ndash;                     placeholder="Due date" />&ndash;&gt;-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->

<!--&lt;!&ndash;          </div>&ndash;&gt;-->
<!--&lt;!&ndash;        </ng-template>&ndash;&gt;-->
<!--&lt;!&ndash;      </div>&ndash;&gt;-->
<!--&lt;!&ndash;      <div class="task-actions" (click)="$event.stopPropagation()">&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          <div class="task-actions" (click)="$event.stopPropagation()" *ngIf="editingTaskId !== task.id">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;        <mat-icon class="edit-icon"&ndash;&gt;-->
<!--&lt;!&ndash;                  (click)="startEdit(task)"&ndash;&gt;-->
<!--&lt;!&ndash;                  title="Edit Task">edit</mat-icon>&ndash;&gt;-->
<!--&lt;!&ndash;        <mat-icon class="delete-icon"&ndash;&gt;-->
<!--&lt;!&ndash;                  (click)="remove(task.id)"&ndash;&gt;-->
<!--&lt;!&ndash;                  title="Delete Task">delete</mat-icon>&ndash;&gt;-->
<!--&lt;!&ndash;        <mat-icon class="add-subtask-icon"&ndash;&gt;-->
<!--&lt;!&ndash;                  (click)="addSubtask(task)"&ndash;&gt;-->
<!--&lt;!&ndash;                  title="Add Subtask">add</mat-icon>&ndash;&gt;-->
<!--&lt;!&ndash;      </div>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->
<!--&lt;!&ndash;    &lt;!&ndash; Subtasks List &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;    <ul *ngIf="task.subtasks && task.subtasks.length && expandedTaskId === task.id" class="subtask-list ms-4 mt-2">&ndash;&gt;-->
<!--&lt;!&ndash;      <li *ngFor="let sub of task.subtasks" class="align-items-center d-flex gap-2">&ndash;&gt;-->
<!--&lt;!&ndash;        <input type="checkbox" [(ngModel)]="sub.done" (change)="svc.updateSubtask(task.id, sub.id, { done: sub.done }).subscribe()"> {{ sub.title }}&ndash;&gt;-->
<!--&lt;!&ndash;        <span class="subtask-actions">&ndash;&gt;-->
<!--&lt;!&ndash;          <mat-icon class="subtask-edit-icon" (click)="editSubtask(task, sub)" title="Edit Subtask">edit</mat-icon>&ndash;&gt;-->
<!--&lt;!&ndash;          <mat-icon class="subtask-delete-icon" (click)="deleteSubtask(task, sub)" title="Delete Subtask">delete</mat-icon>&ndash;&gt;-->
<!--&lt;!&ndash;        </span>&ndash;&gt;-->
<!--&lt;!&ndash;      </li>&ndash;&gt;-->
<!--&lt;!&ndash;    </ul>&ndash;&gt;-->
<!--&lt;!&ndash;  </li>&ndash;&gt;-->
<!--&lt;!&ndash;</ng-template>&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash; Filtered Tasks View &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;<div *ngIf="showFilteredTasks" class="mb-3">&ndash;&gt;-->
<!--&lt;!&ndash;  <div class="d-flex justify-content-between align-items-center mb-3">&ndash;&gt;-->
<!--&lt;!&ndash;    <h5 class="mb-0">&ndash;&gt;-->
<!--&lt;!&ndash;      <i class="fas fa-user me-2"></i>Tasks assigned to: {{ selectedAssignee }}&ndash;&gt;-->
<!--&lt;!&ndash;    </h5>&ndash;&gt;-->
<!--&lt;!&ndash;    <button class="btn btn-outline-secondary btn-sm" (click)="clearAssigneeFilter()">&ndash;&gt;-->
<!--&lt;!&ndash;      <i class="fas fa-times me-1"></i>Clear Filter&ndash;&gt;-->
<!--&lt;!&ndash;    </button>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->

<!--&lt;!&ndash;  <ul class="list-group">&ndash;&gt;-->
<!--&lt;!&ndash;    <ng-container *ngFor="let t of getTasksByAssignee(selectedAssignee)">&ndash;&gt;-->
<!--&lt;!&ndash;      <ng-container *ngTemplateOutlet="taskTemplate; context: { $implicit: t }">&ndash;&gt;-->
<!--&lt;!&ndash;      </ng-container>&ndash;&gt;-->
<!--&lt;!&ndash;    </ng-container>&ndash;&gt;-->
<!--&lt;!&ndash;  </ul>&ndash;&gt;-->
<!--&lt;!&ndash;</div>&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash; Regular Tasks Display &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;<div *ngIf="!isSortedByPriority && !showFilteredTasks">&ndash;&gt;-->
<!--&lt;!&ndash;  <ul class="list-group">&ndash;&gt;-->
<!--&lt;!&ndash;    <ng-container *ngFor="let t of tasks">&ndash;&gt;-->
<!--&lt;!&ndash;      <ng-container *ngTemplateOutlet="taskTemplate; context: { $implicit: t }">&ndash;&gt;-->
<!--&lt;!&ndash;      </ng-container>&ndash;&gt;-->
<!--&lt;!&ndash;    </ng-container>&ndash;&gt;-->
<!--&lt;!&ndash;  </ul>&ndash;&gt;-->
<!--&lt;!&ndash;</div>&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash; Priority Sorted View &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;<div *ngIf="isSortedByPriority">&ndash;&gt;-->
<!--&lt;!&ndash;  &lt;!&ndash; High Priority Section &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;  <div class="mb-4" *ngIf="getTasksByPriority('high').length > 0">&ndash;&gt;-->
<!--&lt;!&ndash;    <h6 class="mb-3 text-muted">&ndash;&gt;-->
<!--&lt;!&ndash;      <i class="fas fa-exclamation-triangle me-2"></i>High Priority&ndash;&gt;-->
<!--&lt;!&ndash;    </h6>&ndash;&gt;-->
<!--&lt;!&ndash;          <ul class="list-group">&ndash;&gt;-->
<!--&lt;!&ndash;        <ng-container *ngFor="let t of getTasksByPriority('high')">&ndash;&gt;-->
<!--&lt;!&ndash;          <ng-container *ngTemplateOutlet="taskTemplate; context: { $implicit: t }">&ndash;&gt;-->
<!--&lt;!&ndash;          </ng-container>&ndash;&gt;-->
<!--&lt;!&ndash;        </ng-container>&ndash;&gt;-->
<!--&lt;!&ndash;      </ul>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->

<!--&lt;!&ndash;  &lt;!&ndash; Medium Priority Section &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;  <div class="mb-4" *ngIf="getTasksByPriority('medium').length > 0">&ndash;&gt;-->
<!--&lt;!&ndash;    <h6 class="mb-3 text-muted">&ndash;&gt;-->
<!--&lt;!&ndash;      <i class="fas fa-minus-circle me-2"></i>Medium Priority&ndash;&gt;-->
<!--&lt;!&ndash;    </h6>&ndash;&gt;-->
<!--&lt;!&ndash;          <ul class="list-group">&ndash;&gt;-->
<!--&lt;!&ndash;        <ng-container *ngFor="let t of getTasksByPriority('medium')">&ndash;&gt;-->
<!--&lt;!&ndash;          <ng-container *ngTemplateOutlet="taskTemplate; context: { $implicit: t }">&ndash;&gt;-->
<!--&lt;!&ndash;          </ng-container>&ndash;&gt;-->
<!--&lt;!&ndash;        </ng-container>&ndash;&gt;-->
<!--&lt;!&ndash;      </ul>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->

<!--&lt;!&ndash;  &lt;!&ndash; Low Priority Section &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;  <div class="mb-4" *ngIf="getTasksByPriority('low').length > 0">&ndash;&gt;-->
<!--&lt;!&ndash;    <h6 class="mb-3 text-muted">&ndash;&gt;-->
<!--&lt;!&ndash;      <i class="fas fa-arrow-down me-2"></i>Low Priority&ndash;&gt;-->
<!--&lt;!&ndash;    </h6>&ndash;&gt;-->
<!--&lt;!&ndash;          <ul class="list-group">&ndash;&gt;-->
<!--&lt;!&ndash;        <ng-container *ngFor="let t of getTasksByPriority('low')">&ndash;&gt;-->
<!--&lt;!&ndash;          <ng-container *ngTemplateOutlet="taskTemplate; context: { $implicit: t }">&ndash;&gt;-->
<!--&lt;!&ndash;          </ng-container>&ndash;&gt;-->
<!--&lt;!&ndash;        </ng-container>&ndash;&gt;-->
<!--&lt;!&ndash;      </ul>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->
<!--&lt;!&ndash;</div>&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash; Task Summary &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;<div class="task-summary-simple mt-4" *ngIf="!isSortedByPriority && !showFilteredTasks">&ndash;&gt;-->
<!--&lt;!&ndash;  <div class="card">&ndash;&gt;-->
<!--&lt;!&ndash;    <div class="card-body text-center">&ndash;&gt;-->
<!--&lt;!&ndash;      <h6 class="mb-3">&ndash;&gt;-->
<!--&lt;!&ndash;        <i class="fas fa-chart-pie me-2"></i>Overall Progress&ndash;&gt;-->
<!--&lt;!&ndash;      </h6>&ndash;&gt;-->
<!--&lt;!&ndash;      <div class="progress mb-2" style="height: 20px;">&ndash;&gt;-->
<!--&lt;!&ndash;        <div class="progress-bar"&ndash;&gt;-->
<!--&lt;!&ndash;             [style.width.%]="getOverallTaskCompletionPercentage()"&ndash;&gt;-->
<!--&lt;!&ndash;             [ngClass]="{&ndash;&gt;-->
<!--&lt;!&ndash;               'bg-success': getOverallTaskCompletionPercentage() >= 80,&ndash;&gt;-->
<!--&lt;!&ndash;               'bg-warning': getOverallTaskCompletionPercentage() >= 50 && getOverallTaskCompletionPercentage() < 80,&ndash;&gt;-->
<!--&lt;!&ndash;               'bg-danger': getOverallTaskCompletionPercentage() < 50&ndash;&gt;-->
<!--&lt;!&ndash;             }">&ndash;&gt;-->
<!--&lt;!&ndash;          {{ getOverallTaskCompletionPercentage() }}%&ndash;&gt;-->
<!--&lt;!&ndash;        </div>&ndash;&gt;-->
<!--&lt;!&ndash;      </div>&ndash;&gt;-->
<!--&lt;!&ndash;      <small class="text-muted">&ndash;&gt;-->
<!--&lt;!&ndash;        {{ getCompletedTasks().length }} completed out of {{ tasks.length }} total tasks&ndash;&gt;-->
<!--&lt;!&ndash;      </small>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->
<!--&lt;!&ndash;</div>&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash; Reminder Notifications &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;<div class="reminder-notifications mt-4" *ngIf="overdueReminders.length > 0 || upcomingReminders.length > 0">&ndash;&gt;-->
<!--&lt;!&ndash;  <div class="d-flex justify-content-between align-items-center mb-3">&ndash;&gt;-->
<!--&lt;!&ndash;    <h6 class="mb-0">&ndash;&gt;-->
<!--&lt;!&ndash;      <i class="fas fa-bell me-2"></i>Reminder Notifications&ndash;&gt;-->
<!--&lt;!&ndash;    </h6>&ndash;&gt;-->
<!--&lt;!&ndash;    &lt;!&ndash; Refresh button removed &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->

<!--&lt;!&ndash;  &lt;!&ndash; Overdue Reminders &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;  <div class="alert alert-danger" *ngIf="overdueReminders.length > 0">&ndash;&gt;-->
<!--&lt;!&ndash;    <h6 class="alert-heading">&ndash;&gt;-->
<!--&lt;!&ndash;      <i class="fas fa-exclamation-triangle me-2"></i>Overdue Reminders ({{ overdueReminders.length }})&ndash;&gt;-->
<!--&lt;!&ndash;    </h6>&ndash;&gt;-->
<!--&lt;!&ndash;    <div class="reminder-list">&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      <div *ngFor="let task of overdueReminders" class="reminder-item">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        <strong>{{ task.title }}</strong> - {{ getReminderStatus(task) }}&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        <span *ngIf="task.assignedTo" class="ms-2 text-muted">({{ task.assignedTo }})</span>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      </div>&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;      <li *ngFor="let r of overdueReminders">&ndash;&gt;-->
<!--&lt;!&ndash;        <strong>{{ r.title }}</strong>&ndash;&gt;-->
<!--&lt;!&ndash;        <span class="ms-2 text-muted" *ngIf="r.assignee">({{ assigneeLabel(r.assignee) }})</span>&ndash;&gt;-->
<!--&lt;!&ndash;        <span class="ms-2">- Overdue by {{ r.daysOverdue }} day(s)</span>&ndash;&gt;-->
<!--&lt;!&ndash;      </li>&ndash;&gt;-->

<!--&lt;!&ndash;    </div>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->

<!--&lt;!&ndash;  &lt;!&ndash; Upcoming Reminders &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;  <div class="alert alert-warning" *ngIf="upcomingReminders.length > 0">&ndash;&gt;-->
<!--&lt;!&ndash;    <h6 class="alert-heading">&ndash;&gt;-->
<!--&lt;!&ndash;      <i class="fas fa-bell me-2"></i>Upcoming Reminders ({{ upcomingReminders.length }})&ndash;&gt;-->
<!--&lt;!&ndash;    </h6>&ndash;&gt;-->
<!--&lt;!&ndash;    <div class="reminder-list">&ndash;&gt;-->
<!--&lt;!&ndash;      <div *ngFor="let task of upcomingReminders" class="reminder-item">&ndash;&gt;-->
<!--&lt;!&ndash;        <strong>{{ task.title }}</strong> - {{ getReminderStatus(task) }}&ndash;&gt;-->
<!--&lt;!&ndash;        <span *ngIf="task.assignedTo" class="ms-2 text-muted">({{ task.assignedTo }})</span>&ndash;&gt;-->
<!--&lt;!&ndash;      </div>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->
<!--&lt;!&ndash;</div>&ndash;&gt;-->
<!--&lt;!&ndash; frontend/Wedding-planner-frontend/src/app/pages/task-manager/task-manager.html &ndash;&gt;-->
<!--&lt;!&ndash; Header Controls &ndash;&gt;-->
<!--<div class="d-flex justify-content-end gap-2 mb-3">-->
<!--  <button class="btn btn-primary" (click)="sortByPriority()">Sort By Priority</button>-->
<!--  <button class="btn btn-outline-secondary" *ngIf="isSortedByPriority" (click)="resetSort()">Reset Sort</button>-->
<!--  <button class="btn btn-primary" (click)="toggleAddForm()">-->
<!--    {{ showAddForm ? 'Close' : 'Add Task' }}-->
<!--  </button>-->
<!--</div>-->

<!--&lt;!&ndash; Task Filters &ndash;&gt;-->
<!--<div class="task-filters mb-3" *ngIf="!isSortedByPriority && !showFilteredTasks">-->
<!--  <div class="row g-2 align-items-center">-->
<!--    <div class="col-md-3">-->
<!--      <label class="form-label">Filter by assigned person:</label>-->
<!--    </div>-->
<!--    <div class="col-md-4">-->
<!--      <select class="form-select" (change)="filterByAssignee($any($event.target).value)">-->
<!--        <option value="">All tasks</option>-->
<!--        <option *ngFor="let user of availableUsers" [value]="user">{{ user }}</option>-->
<!--      </select>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->

<!--&lt;!&ndash; Add Task Form &ndash;&gt;-->
<!--<div *ngIf="showAddForm" class="mb-3 row g-2 align-items-end">-->
<!--  <div class="col-md-4">-->
<!--    <label class="form-label">Title</label>-->
<!--    <input [(ngModel)]="newTitle" class="form-control" placeholder="Task title" />-->
<!--  </div>-->

<!--  <div class="col-md-2">-->
<!--    <label class="form-label">Due date</label>-->
<!--    <input type="date" [(ngModel)]="newDueDate" (change)="onDueDateChange()" class="form-control" />-->
<!--  </div>-->

<!--&lt;!&ndash;  <div class="col-md-4">&ndash;&gt;-->
<!--&lt;!&ndash;    <div class="form-check">&ndash;&gt;-->
<!--&lt;!&ndash;      <input class="form-check-input" type="checkbox"&ndash;&gt;-->
<!--&lt;!&ndash;             [(ngModel)]="newReminderEnabled"&ndash;&gt;-->
<!--&lt;!&ndash;             [disabled]="!newDueDate"&ndash;&gt;-->
<!--&lt;!&ndash;             id="reminderCheck">&ndash;&gt;-->
<!--&lt;!&ndash;      <label class="form-check-label" for="reminderCheck">&ndash;&gt;-->
<!--&lt;!&ndash;        Enable reminder&ndash;&gt;-->
<!--&lt;!&ndash;      </label>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->



<!--  </div>-->

<!--  <div class="col-md-2">-->
<!--    <label class="form-label">Priority</label>-->
<!--    <select [(ngModel)]="newPriority" class="form-select">-->
<!--      <option value="low">Low</option>-->
<!--      <option value="medium">Medium</option>-->
<!--      <option value="high">High</option>-->
<!--    </select>-->
<!--  </div>-->

<!--  <div class="col-md-2">-->
<!--    <label class="form-label">Assign to</label>-->
<!--    <select [(ngModel)]="newAssignedTo" class="form-select">-->
<!--      <option value="">Select person</option>-->
<!--      <option *ngFor="let user of availableUsers" [value]="user">{{ user }}</option>-->
<!--    </select>-->
<!--  </div>-->



<!--  <div class="col-md-2 d-flex gap-2">-->
<!--    <button (click)="add()" class="btn btn-primary w-100">Add</button>-->
<!--    <button (click)="cancelAdd()" class="btn btn-outline-secondary w-100">Cancel</button>-->
<!--  </div>-->

<!--  <div class="col-12">-->
<!--    <label class="form-label">Description</label>-->
<!--    <textarea [(ngModel)]="newDescription" class="form-control" rows="2" placeholder="Optional description"></textarea>-->
<!--  </div>-->

<!--<div class="col-md-4">-->
<!--  <div class="form-check">-->
<!--    <input class="form-check-input"-->
<!--           type="checkbox"-->
<!--           [(ngModel)]="newReminderEnabled"-->
<!--           id="reminderCheck">-->
<!--    <label class="form-check-label" for="reminderCheck">-->
<!--      Enable reminder-->
<!--    </label>-->
<!--  </div>-->
<!--</div>-->

<!--&lt;!&ndash; Reusable Task Template &ndash;&gt;-->
<!--<ng-template #taskTemplate let-task>-->
<!--  <li class="list-group-item" [class.expanded]="expandedTaskId === task.id">-->
<!--    <div class="d-flex justify-content-between align-items-start gap-3" (click)="toggleExpandTask(task)" style="cursor:pointer;">-->
<!--      <div class="form-check mt-1" (click)="$event.stopPropagation()">-->
<!--        <input class="form-check-input"-->
<!--               type="checkbox"-->
<!--               [checked]="task.done"-->
<!--               (change)="onDoneChange(task, $any($event.target).checked)" />-->
<!--      </div>-->
<!--      <div class="flex-grow-1">-->
<!--        <div *ngIf="editingTaskId !== task.id; else editForm">-->
<!--          <div class="d-flex align-items-center">-->
<!--            <div class="flex-grow-1">-->
<!--              <span class="fw-semibold" [class.text-decoration-line-through]="task.done">-->
<!--                {{ task.title }}-->
<!--              </span>-->
<!--              <span class="badge ms-2" [ngClass]="{-->
<!--                'priority-low': task.priority==='low',-->
<!--                'priority-medium': task.priority==='medium',-->
<!--                'priority-high': task.priority==='high'-->
<!--              }">{{ task.priority || 'medium' }}</span>-->
<!--              <span *ngIf="getSubtaskCount(task) > 0" class="ms-2 text-muted small">({{ getCompletedSubtaskCount(task) }}/{{ getSubtaskCount(task) }})</span>-->
<!--            </div>-->
<!--          </div>-->

<!--          <div class="text-muted small" *ngIf="task.description">{{ task.description }}</div>-->

<!--          <div class="text-muted small" *ngIf="task.assignedTo">-->
<!--            <i class="fas fa-user me-1"></i>Assigned to: {{ task.assignedTo }}-->
<!--          </div>-->

<!--          <div class="text-muted small" *ngIf="task.dueDate || task.reminderDate">-->
<!--            <i class="fas fa-bell me-1" [ngClass]="{-->
<!--              'text-warning': isReminderDueSoon(task),-->
<!--              'text-danger': isReminderOverdue(task)-->
<!--            }"></i>{{ getReminderStatus(task) }}-->
<!--          </div>-->

<!--          <div class="text-muted small" *ngIf="task.vendorId">-->
<!--            <i class="fas fa-briefcase me-1"></i>-->
<!--            Vendor: {{ getVendorById(task.vendorId)?.name }}-->
<!--            <span class="text-muted">({{ getVendorById(task.vendorId)?.category }})</span>-->
<!--          </div>-->
<!--        </div>-->

<!--        <ng-template #editForm>-->
<!--          <div class="row g-2">-->
<!--            <div class="col-md-5">-->
<!--              <input [(ngModel)]="editDraft.title"-->
<!--                     class="form-control form-control-sm"-->
<!--                     placeholder="Title" />-->
<!--            </div>-->

<!--            <div class="col-md-2">-->
<!--              <select [(ngModel)]="editDraft.priority" class="form-select form-select-sm">-->
<!--                <option value="low">Low</option>-->
<!--                <option value="medium">Medium</option>-->
<!--                <option value="high">High</option>-->
<!--              </select>-->
<!--            </div>-->

<!--            <div class="col-md-3">-->
<!--              <select [(ngModel)]="editDraft.assignedTo" class="form-select form-select-sm">-->
<!--                <option value="">Select person</option>-->
<!--                <option *ngFor="let user of availableUsers" [value]="user">{{ user }}</option>-->
<!--              </select>-->
<!--            </div>-->

<!--            <div class="col-md-2 d-flex gap-2">-->
<!--              <button (click)="saveEdit()" class="btn btn-sm btn-primary">Save</button>-->
<!--              <button (click)="cancelEdit()" class="btn btn-sm btn-outline-secondary">Cancel</button>-->
<!--            </div>-->

<!--            <div class="col-12">-->
<!--              <textarea [(ngModel)]="editDraft.description"-->
<!--                        class="form-control form-control-sm"-->
<!--                        rows="2"-->
<!--                        placeholder="Description"></textarea>-->
<!--            </div>-->

<!--&lt;!&ndash;            <div class="col-md-4">&ndash;&gt;-->
<!--&lt;!&ndash;              <div class="form-check">&ndash;&gt;-->
<!--&lt;!&ndash;                <input class="form-check-input"&ndash;&gt;-->
<!--&lt;!&ndash;                       type="checkbox"&ndash;&gt;-->
<!--&lt;!&ndash;                       [(ngModel)]="editDraft.reminderEnabled"&ndash;&gt;-->
<!--&lt;!&ndash;                       [disabled]="!editDraft.dueDate"&ndash;&gt;-->
<!--&lt;!&ndash;                       [id]="'editReminderCheck' + task.id">&ndash;&gt;-->
<!--&lt;!&ndash;                <label class="form-check-label" [for]="'editReminderCheck' + task.id">&ndash;&gt;-->
<!--&lt;!&ndash;                  Enable reminder&ndash;&gt;-->
<!--&lt;!&ndash;                </label>&ndash;&gt;-->
<!--&lt;!&ndash;              </div>&ndash;&gt;-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->

<!--            <div class="col-md-4">-->
<!--              <div class="form-check">-->
<!--                <input class="form-check-input"-->
<!--                       type="checkbox"-->
<!--                       [(ngModel)]="editDraft.reminderEnabled"-->
<!--                       [id]="'editReminderCheck' + task.id">-->
<!--                <label class="form-check-label" [for]="'editReminderCheck' + task.id">-->
<!--                  Enable reminder-->
<!--                </label>-->
<!--              </div>-->
<!--            </div>-->

<!--            <div class="col-md-4">-->
<!--              <label class="form-label form-label-sm">Due date</label>-->
<!--              <input type="date"-->
<!--                     [(ngModel)]="editDraft.dueDate"-->
<!--                     class="form-control form-control-sm"-->
<!--                     placeholder="Due date" />-->
<!--            </div>-->
<!--          </div>-->
<!--        </ng-template>-->
<!--      </div>-->

<!--      <div class="task-actions" (click)="$event.stopPropagation()">-->
<!--        <mat-icon class="edit-icon"-->
<!--                  (click)="startEdit(task)"-->
<!--                  title="Edit Task">edit</mat-icon>-->
<!--        <mat-icon class="delete-icon"-->
<!--                  (click)="remove(task.id)"-->
<!--                  title="Delete Task">delete</mat-icon>-->
<!--        <mat-icon class="add-subtask-icon"-->
<!--                  (click)="addSubtask(task)"-->
<!--                  title="Add Subtask">add</mat-icon>-->
<!--      </div>-->
<!--    </div>-->

<!--    <ul *ngIf="task.subtasks && task.subtasks.length && expandedTaskId === task.id" class="subtask-list ms-4 mt-2">-->
<!--      <li *ngFor="let sub of task.subtasks" class="align-items-center d-flex gap-2">-->
<!--        <input type="checkbox" [(ngModel)]="sub.done" (change)="svc.updateSubtask(task.id, sub.id, { done: sub.done }).subscribe()"> {{ sub.title }}-->
<!--        <span class="subtask-actions">-->
<!--          <mat-icon class="subtask-edit-icon" (click)="editSubtask(task, sub)" title="Edit Subtask">edit</mat-icon>-->
<!--          <mat-icon class="subtask-delete-icon" (click)="deleteSubtask(task, sub)" title="Delete Subtask">delete</mat-icon>-->
<!--        </span>-->
<!--      </li>-->
<!--    </ul>-->
<!--  </li>-->
<!--</ng-template>-->

<!--&lt;!&ndash; Filtered Tasks View &ndash;&gt;-->
<!--<div *ngIf="showFilteredTasks" class="mb-3">-->
<!--  <div class="d-flex justify-content-between align-items-center mb-3">-->
<!--    <h5 class="mb-0">-->
<!--      <i class="fas fa-user me-2"></i>Tasks assigned to: {{ selectedAssignee }}-->
<!--    </h5>-->
<!--    <button class="btn btn-outline-secondary btn-sm" (click)="clearAssigneeFilter()">-->
<!--      <i class="fas fa-times me-1"></i>Clear Filter-->
<!--    </button>-->
<!--  </div>-->

<!--  <ul class="list-group">-->
<!--    <ng-container *ngFor="let t of getTasksByAssignee(selectedAssignee)">-->
<!--      <ng-container *ngTemplateOutlet="taskTemplate; context: { $implicit: t }">-->
<!--      </ng-container>-->
<!--    </ng-container>-->
<!--  </ul>-->
<!--</div>-->

<!--&lt;!&ndash; Regular Tasks Display &ndash;&gt;-->
<!--<div *ngIf="!isSortedByPriority && !showFilteredTasks">-->
<!--  <ul class="list-group">-->
<!--    <ng-container *ngFor="let t of tasks">-->
<!--      <ng-container *ngTemplateOutlet="taskTemplate; context: { $implicit: t }">-->
<!--      </ng-container>-->
<!--    </ng-container>-->
<!--  </ul>-->
<!--</div>-->

<!--&lt;!&ndash; Priority Sorted View &ndash;&gt;-->
<!--<div *ngIf="isSortedByPriority">-->
<!--  <div class="mb-4" *ngIf="getTasksByPriority('high').length > 0">-->
<!--    <h6 class="mb-3 text-muted">-->
<!--      <i class="fas fa-exclamation-triangle me-2"></i>High Priority-->
<!--    </h6>-->
<!--    <ul class="list-group">-->
<!--      <ng-container *ngFor="let t of getTasksByPriority('high')">-->
<!--        <ng-container *ngTemplateOutlet="taskTemplate; context: { $implicit: t }">-->
<!--        </ng-container>-->
<!--      </ng-container>-->
<!--    </ul>-->
<!--  </div>-->

<!--  <div class="mb-4" *ngIf="getTasksByPriority('medium').length > 0">-->
<!--    <h6 class="mb-3 text-muted">-->
<!--      <i class="fas fa-minus-circle me-2"></i>Medium Priority-->
<!--    </h6>-->
<!--    <ul class="list-group">-->
<!--      <ng-container *ngFor="let t of getTasksByPriority('medium')">-->
<!--        <ng-container *ngTemplateOutlet="taskTemplate; context: { $implicit: t }">-->
<!--        </ng-container>-->
<!--      </ng-container>-->
<!--    </ul>-->
<!--  </div>-->

<!--  <div class="mb-4" *ngIf="getTasksByPriority('low').length > 0">-->
<!--    <h6 class="mb-3 text-muted">-->
<!--      <i class="fas fa-arrow-down me-2"></i>Low Priority-->
<!--    </h6>-->
<!--    <ul class="list-group">-->
<!--      <ng-container *ngFor="let t of getTasksByPriority('low')">-->
<!--        <ng-container *ngTemplateOutlet="taskTemplate; context: { $implicit: t }">-->
<!--        </ng-container>-->
<!--      </ng-container>-->
<!--    </ul>-->
<!--  </div>-->
<!--</div>-->

<!--&lt;!&ndash; Task Summary &ndash;&gt;-->
<!--<div class="task-summary-simple mt-4" *ngIf="!isSortedByPriority && !showFilteredTasks">-->
<!--  <div class="card">-->
<!--    <div class="card-body text-center">-->
<!--      <h6 class="mb-3">-->
<!--        <i class="fas fa-chart-pie me-2"></i>Overall Progress-->
<!--      </h6>-->
<!--      <div class="progress mb-2" style="height: 20px;">-->
<!--        <div class="progress-bar"-->
<!--             [style.width.%]="getOverallTaskCompletionPercentage()"-->
<!--             [ngClass]="{-->
<!--               'bg-success': getOverallTaskCompletionPercentage() >= 80,-->
<!--               'bg-warning': getOverallTaskCompletionPercentage() >= 50 && getOverallTaskCompletionPercentage() < 80,-->
<!--               'bg-danger': getOverallTaskCompletionPercentage() < 50-->
<!--             }">-->
<!--          {{ getOverallTaskCompletionPercentage() }}%-->
<!--        </div>-->
<!--      </div>-->
<!--      <small class="text-muted">-->
<!--        {{ getCompletedTasks().length }} completed out of {{ tasks.length }} total tasks-->
<!--      </small>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->

<!--&lt;!&ndash; Reminder Notifications &ndash;&gt;-->
<!--<div class="reminder-notifications mt-4" *ngIf="overdueReminders.length > 0 || upcomingReminders.length > 0">-->
<!--  <div class="d-flex justify-content-between align-items-center mb-3">-->
<!--    <h6 class="mb-0">-->
<!--      <i class="fas fa-bell me-2"></i>Reminder Notifications-->
<!--    </h6>-->
<!--  </div>-->

<!--  &lt;!&ndash; Overdue Reminders &ndash;&gt;-->
<!--  <div class="alert alert-danger" *ngIf="overdueReminders.length > 0">-->
<!--    <h6 class="alert-heading">-->
<!--      <i class="fas fa-exclamation-triangle me-2"></i>Overdue Reminders ({{ overdueReminders.length }})-->
<!--    </h6>-->
<!--    <div class="reminder-list">-->
<!--      <li *ngFor="let r of overdueReminders">-->
<!--        <strong>{{ r.title }}</strong>-->
<!--        <span class="ms-2 text-muted" *ngIf="r.assignee">({{ assigneeLabel(r.assignee) }})</span>-->
<!--        <span class="ms-2">- Overdue by {{ r.daysOverdue }} day(s)</span>-->
<!--      </li>-->
<!--    </div>-->
<!--  </div>-->

<!--  &lt;!&ndash; Upcoming Reminders (keep or remove as you like) &ndash;&gt;-->
<!--  <div class="alert alert-warning" *ngIf="upcomingReminders.length > 0">-->
<!--    <h6 class="alert-heading">-->
<!--      <i class="fas fa-bell me-2"></i>Upcoming Reminders ({{ upcomingReminders.length }})-->
<!--    </h6>-->
<!--    <div class="reminder-list">-->
<!--      <div *ngFor="let task of upcomingReminders" class="reminder-item">-->
<!--        <strong>{{ task.title }}</strong> - {{ getReminderStatus(task) }}-->
<!--        <span *ngIf="task.assignedTo" class="ms-2 text-muted">({{ task.assignedTo }})</span>-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->

<!-- Header Controls -->
<div class="d-flex justify-content-end gap-2 mb-3">
  <button class="btn btn-primary" (click)="sortByPriority()">Sort By Priority</button>
  <button class="btn btn-outline-secondary" *ngIf="isSortedByPriority" (click)="resetSort()">Reset Sort</button>
  <button class="btn btn-primary" (click)="toggleAddForm()">
    {{ showAddForm ? 'Close' : 'Add Task' }}
  </button>
</div>

<!-- Task Filters -->
<div class="task-filters mb-3" *ngIf="!isSortedByPriority && !showFilteredTasks">
  <div class="row g-2 align-items-center">
    <div class="col-md-3">
      <label class="form-label">Filter by assigned person:</label>
    </div>
    <div class="col-md-4">
      <select class="form-select" (change)="filterByAssignee($any($event.target).value)">
        <option value="">All tasks</option>
        <option *ngFor="let user of availableUsers" [value]="user">{{ user }}</option>
      </select>
    </div>
  </div>
</div>

<!-- Add Task Form -->
<div *ngIf="showAddForm" class="mb-3 row g-2 align-items-end">
  <div class="col-md-4">
    <label class="form-label">Title</label>
    <input [(ngModel)]="newTitle" class="form-control" placeholder="Task title" />
  </div>
  <!--  <div class="col-md-2">-->
  <!--    <label class="form-label">Due date</label>-->
  <!--    <input type="date" [(ngModel)]="newDueDate" (change)="onDueDateChange()" class="form-control" />-->
  <!--  </div>-->
  <div class="col-md-2">
    <label class="form-label">Priority</label>
    <select [(ngModel)]="newPriority" class="form-select">
      <option value="low">Low</option>
      <option value="medium">Medium</option>
      <option value="high">High</option>
    </select>
  </div>
  <div class="col-md-2">
    <label class="form-label">Assign to</label>
    <select [(ngModel)]="newAssignedTo" class="form-select">
      <option value="">Select person</option>
      <option *ngFor="let user of availableUsers" [value]="user">{{ user }}</option>
    </select>
  </div>
  <div class="col-md-2 d-flex gap-2">
    <button (click)="add()" class="btn btn-primary w-100">Add</button>
    <button (click)="cancelAdd()" class="btn btn-outline-secondary w-100">Cancel</button>
  </div>
  <div class="col-12">
    <label class="form-label">Description</label>
    <textarea [(ngModel)]="newDescription" class="form-control" rows="2" placeholder="Optional description"></textarea>
  </div>
  <div class="col-md-4">
    <div class="form-check">
      <input class="form-check-input" type="checkbox" [(ngModel)]="newReminderEnabled" (change)="onReminderEnabledChange()" id="reminderCheck">
      <label class="form-check-label" for="reminderCheck">
        Enable reminder
      </label>
    </div>
  </div>
  <div class="col-md-4" *ngIf="newReminderEnabled">
    <label class="form-label">Reminder date</label>
    <input type="date" [(ngModel)]="newReminderDate" class="form-control" />
    <small class="text-muted">Defaults to due date if not set</small>
  </div>
</div>

<!-- Reusable Task Template -->
<ng-template #taskTemplate let-task>
  <li class="list-group-item" [class.expanded]="expandedTaskId === task.id">
    <div class="d-flex justify-content-between align-items-start gap-3" (click)="toggleExpandTask(task)" style="cursor:pointer;">
      <div class="form-check mt-1" (click)="$event.stopPropagation()">
        <input class="form-check-input"
               type="checkbox"
               [checked]="task.done"
               (change)="onDoneChange(task, $any($event.target).checked)" />
      </div>
      <div class="flex-grow-1">
        <div *ngIf="editingTaskId !== task.id; else editForm">
          <div class="d-flex align-items-center">
            <div class="flex-grow-1">
              <span class="fw-semibold" [class.text-decoration-line-through]="task.done">
                {{ task.title }}
              </span>
              <span class="badge ms-2" [ngClass]="{
                'priority-low': task.priority==='low',
                'priority-medium': task.priority==='medium',
                'priority-high': task.priority==='high'
              }">{{ task.priority || 'medium' }}</span>
              <span *ngIf="getSubtaskCount(task) > 0" class="ms-2 text-muted small">({{ getCompletedSubtaskCount(task) }}/{{ getSubtaskCount(task) }})</span>
            </div>
          </div>
          <div class="text-muted small" *ngIf="task.description">{{ task.description }}</div>
          <div class="text-muted small" *ngIf="task.assignedTo">
            <i class="fas fa-user me-1"></i>Assigned to: {{ task.assignedTo }}
          </div>
          <div class="text-muted small" *ngIf="task.reminderEnabled && task.reminderDate">
            <i class="fas fa-bell me-1" [ngClass]="{
              'text-warning': isReminderDueSoon(task),
              'text-danger': isReminderOverdue(task)
            }"></i>{{ getReminderStatus(task) }}
          </div>
          <div class="text-muted small" *ngIf="task.vendorId">
            <i class="fas fa-briefcase me-1"></i>
            Vendor: {{ getVendorById(task.vendorId)?.name }} <span class="text-muted">({{ getVendorById(task.vendorId)?.category }})</span>
          </div>
        </div>
        <ng-template #editForm>
          <div class="row g-2">
            <!--            <div class="col-md-5">-->
            <div class="col-md-4">
              <input [(ngModel)]="editDraft.title"
                     class="form-control form-control-sm"
                     placeholder="Title" />
            </div>
            <div class="col-md-2">
              <select [(ngModel)]="editDraft.priority" class="form-select form-select-sm">
                <option value="low">Low</option>
                <option value="medium">Medium</option>
                <option value="high">High</option>
              </select>
            </div>
            <div class="col-md-3">
              <select [(ngModel)]="editDraft.assignedTo" class="form-select form-select-sm">
                <option value="">Select person</option>
                <option *ngFor="let user of availableUsers" [value]="user">{{ user }}</option>
              </select>
            </div>
            <!--            <div class="col-md-2 d-flex gap-2">-->
            <div class="col-md-3 d-flex gap-2">
              <button (click)="saveEdit()" class="btn btn-sm btn-primary">Save</button>
              <button (click)="cancelEdit()" class="btn btn-sm btn-outline-secondary">Cancel</button>
            </div>
            <div class="col-12">
              <textarea [(ngModel)]="editDraft.description"
                        class="form-control form-control-sm"
                        rows="2"
                        placeholder="Description"></textarea>
            </div>
            <div class="col-md-4">
              <div class="form-check">
                <input class="form-check-input"
                       type="checkbox"
                       [(ngModel)]="editDraft.reminderEnabled"
                       [id]="'editReminderCheck' + task.id">
                <label class="form-check-label" [for]="'editReminderCheck' + task.id">
                  Enable reminder
                </label>
              </div>
            </div>
            <div class="col-md-4" *ngIf="editDraft.reminderEnabled">
              <label class="form-label form-label-sm">Due/Reminder Date</label>
              <input type="date"
                     [(ngModel)]="editDraft.reminderDate"
                     class="form-control form-control-sm"
                     placeholder="Due/Reminder date" />
            </div>
          </div>
        </ng-template>
      </div>
      <!--      <div class="task-actions" (click)="$event.stopPropagation()">-->
      <div class="task-actions" (click)="$event.stopPropagation()" *ngIf="editingTaskId !== task.id">
        <mat-icon class="edit-icon"
                  (click)="startEdit(task)"
                  title="Edit Task">edit</mat-icon>
        <mat-icon class="delete-icon"
                  (click)="remove(task.id)"
                  title="Delete Task">delete</mat-icon>
        <mat-icon class="add-subtask-icon"
                  (click)="addSubtask(task)"
                  title="Add Subtask">add</mat-icon>
      </div>
    </div>
    <!-- Subtasks List -->
    <ul *ngIf="task.subtasks && task.subtasks.length && expandedTaskId === task.id" class="subtask-list ms-4 mt-2">
      <li *ngFor="let sub of task.subtasks" class="align-items-center d-flex gap-2">
        <input type="checkbox" [(ngModel)]="sub.done" (change)="svc.updateSubtask(task.id, sub.id, { done: sub.done }).subscribe()"> {{ sub.title }}
        <span class="subtask-actions">
          <mat-icon class="subtask-edit-icon" (click)="editSubtask(task, sub)" title="Edit Subtask">edit</mat-icon>
          <mat-icon class="subtask-delete-icon" (click)="deleteSubtask(task, sub)" title="Delete Subtask">delete</mat-icon>
        </span>
      </li>
    </ul>
  </li>
</ng-template>

<!-- Filtered Tasks View -->
<div *ngIf="showFilteredTasks" class="mb-3">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h5 class="mb-0">
      <i class="fas fa-user me-2"></i>Tasks assigned to: {{ selectedAssignee }}
    </h5>
    <button class="btn btn-outline-secondary btn-sm" (click)="clearAssigneeFilter()">
      <i class="fas fa-times me-1"></i>Clear Filter
    </button>
  </div>

  <ul class="list-group">
    <ng-container *ngFor="let t of getTasksByAssignee(selectedAssignee)">
      <ng-container *ngTemplateOutlet="taskTemplate; context: { $implicit: t }">
      </ng-container>
    </ng-container>
  </ul>
</div>

<!-- Regular Tasks Display -->
<div *ngIf="!isSortedByPriority && !showFilteredTasks">
  <ul class="list-group">
    <ng-container *ngFor="let t of tasks">
      <ng-container *ngTemplateOutlet="taskTemplate; context: { $implicit: t }">
      </ng-container>
    </ng-container>
  </ul>
</div>

<!-- Priority Sorted View -->
<div *ngIf="isSortedByPriority">
  <!-- High Priority Section -->
  <div class="mb-4" *ngIf="getTasksByPriority('high').length > 0">
    <h6 class="mb-3 text-muted">
      <i class="fas fa-exclamation-triangle me-2"></i>High Priority
    </h6>
    <ul class="list-group">
      <ng-container *ngFor="let t of getTasksByPriority('high')">
        <ng-container *ngTemplateOutlet="taskTemplate; context: { $implicit: t }">
        </ng-container>
      </ng-container>
    </ul>
  </div>

  <!-- Medium Priority Section -->
  <div class="mb-4" *ngIf="getTasksByPriority('medium').length > 0">
    <h6 class="mb-3 text-muted">
      <i class="fas fa-minus-circle me-2"></i>Medium Priority
    </h6>
    <ul class="list-group">
      <ng-container *ngFor="let t of getTasksByPriority('medium')">
        <ng-container *ngTemplateOutlet="taskTemplate; context: { $implicit: t }">
        </ng-container>
      </ng-container>
    </ul>
  </div>

  <!-- Low Priority Section -->
  <div class="mb-4" *ngIf="getTasksByPriority('low').length > 0">
    <h6 class="mb-3 text-muted">
      <i class="fas fa-arrow-down me-2"></i>Low Priority
    </h6>
    <ul class="list-group">
      <ng-container *ngFor="let t of getTasksByPriority('low')">
        <ng-container *ngTemplateOutlet="taskTemplate; context: { $implicit: t }">
        </ng-container>
      </ng-container>
    </ul>
  </div>
</div>

<!-- Task Summary -->
<div class="task-summary-simple mt-4" *ngIf="!isSortedByPriority && !showFilteredTasks">
  <div class="card">
    <div class="card-body text-center">
      <h6 class="mb-3">
        <i class="fas fa-chart-pie me-2"></i>Overall Progress
      </h6>
      <div class="progress mb-2" style="height: 20px;">
        <div class="progress-bar"
             [style.width.%]="getOverallTaskCompletionPercentage()"
             [ngClass]="{
               'bg-success': getOverallTaskCompletionPercentage() >= 80,
               'bg-warning': getOverallTaskCompletionPercentage() >= 50 && getOverallTaskCompletionPercentage() < 80,
               'bg-danger': getOverallTaskCompletionPercentage() < 50
             }">
          {{ getOverallTaskCompletionPercentage() }}%
        </div>
      </div>
      <small class="text-muted">
        {{ getCompletedTasks().length }} completed out of {{ tasks.length }} total tasks
      </small>
    </div>
  </div>
</div>

<!-- Reminder Notifications -->
<div class="reminder-notifications mt-4" *ngIf="overdueReminders.length > 0 || upcomingReminders.length > 0">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h6 class="mb-0">
      <i class="fas fa-bell me-2"></i>Reminder Notifications
    </h6>
    <!-- Refresh button removed -->
  </div>

  <!-- Overdue Reminders -->
  <div class="alert alert-danger" *ngIf="overdueReminders.length > 0">
    <h6 class="alert-heading">
      <i class="fas fa-exclamation-triangle me-2"></i>Overdue Reminders ({{ overdueReminders.length }})
    </h6>
    <div class="reminder-list">
      <!--      <div *ngFor="let task of overdueReminders" class="reminder-item">-->
      <!--        <strong>{{ task.title }}</strong> - {{ getReminderStatus(task) }}-->
      <!--        <span *ngIf="task.assignedTo" class="ms-2 text-muted">({{ task.assignedTo }})</span>-->
      <!--      </div>-->

      <li *ngFor="let r of overdueReminders">
        <strong>{{ r.title }}</strong>
        <span class="ms-2 text-muted" *ngIf="r.assignee">({{ assigneeLabel(r.assignee) }})</span>
        <span class="ms-2">- Overdue by {{ r.daysOverdue }} day(s)</span>
      </li>

    </div>
  </div>

  <!-- Upcoming Reminders -->
  <div class="alert alert-warning" *ngIf="upcomingReminders.length > 0">
    <h6 class="alert-heading">
      <i class="fas fa-bell me-2"></i>Upcoming Reminders ({{ upcomingReminders.length }})
    </h6>
    <div class="reminder-list">
      <div *ngFor="let task of upcomingReminders" class="reminder-item">
        <strong>{{ task.title }}</strong> - {{ getReminderStatus(task) }}
        <span *ngIf="task.assignedTo" class="ms-2 text-muted">({{ task.assignedTo }})</span>
      </div>
    </div>
  </div>
</div>
